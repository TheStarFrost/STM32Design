## 电子技术课程设计工作日志
#####  清华大学 2024年8月 
**第六组  雷雨欣 罗周子 黄一浩**

### 2024/8/19 上午
- 检查小车各部分是否正常工作,校准光电探头、超声探头，更换损坏的超声探头
- 检查马达等是否正常工作，检查摄像头工作正常
- 全体成员配置好代码环境，初步讨论计划方案

### 2024/8/19 下午
- 初始化仓库,为共同撰写代码做准备
- 超声波模块问题处理完成
- 处理电机直走转弯
- 处理光电逻辑判断
- 整合与调试
- 光电寻迹基础版本完成,能顺利跑完简单版本的圈

### 2024/8/20 上午
- 试图进一步提高小车速度，发现硬件问题
- 更换轮子电机以及轮子本身，学习更多实操技巧
- 针对复杂赛道编程，采取“扫描到全白就右转”的策略，初步实现了复杂赛道的跑通

### 2024/8/20 下午
- 进行左右转的灵活切换
- 排查硬件问题，更换电池
- 完全实现了复杂赛道的跑通，并在此基础上提高的复杂赛道的速度
- 从复杂赛道的算法中吸取灵感，在保证不脱轨的前提下高度提升了简单赛道的速度
- 验收了两个赛道，得分90，92

### 2024/8/21 上午
- 完成了避障程序的编写与跑通
- 程序的思路经历了四次迭代：第一次在全白处原地转圈，根据是否找到轨道判断是否进入避障模式；
- 第二次将避障改为优先级比循迹更高的程序，遇到障碍物采取旋转策略
- 由于第二版经常出现侧面轮子蹭到障碍物的情况，第三版改为遇到障碍物旋转+后退，并通过调整参数修复了这一问题

### 2024/8/21 下午
- 完成了第四版程序编写，在第三版基础上进一步优化，遇到障碍旋转后退后继续旋转，可以更精准地找到没有障碍的方向
- 将小车放在多个类型的轨道上测试，均取得了比较理想的结果
- 应对下午的科目一竞速比赛，对循迹程序做出进一步的优化，尝试提高直道速度
- 尝试通过全白处后退一小步的策略，解决小车容易冲出跑道的问题，但由于后退尺度不好把握，舍弃了这一思路
- 尝试通过判断弯道大小采取不同转弯尺度的问题，解决小车在直道上左右摆动导致速度偏慢的问题，但时间限制还未精调参数
- 虽然竞速比赛的结果不甚理想，但借此机会和同学们学到了很多调试技巧，收获颇丰
- 顺利完成了科目二的验收

### 2024/8/22 上午
  - 熟悉openMV摄像头模块的结构与使用
  - 调整程序和参数，使得摄像头能够辨认红色小球
  - 实现了摄像头和单片机之间的通讯
  - 通过摄像头和单片机之间的通讯，实现了摄像头探测到小球后通过单片机控制电机运动
 
### 2024/8/22 下午
 - 具体设计了电机运动的模式：通过计算红色区域中心横坐标与图像横坐标的比例，得到小球的位置情况，将这一参数传递给电机，电机据此控制转弯的方向和大小
 - 在看不到小球时，让小车原地旋转，直至看到小球
 - 通过这两个逻辑，初步实现了小车对小球的识别与运球操作
 - 优化程序，原地旋转发现球后，往反方向旋转一个小角度，让球尽量处于小车的中间
 - 通过红色区域中心的纵坐标估计小球和小车之间的距离，当球与车之间距离很小的时候，减小小车的速度，使运球更加稳当
 - 通过不断的调参以及试错，精益求精，让小车达到了非常智能的水平

### 2024/8/23 上午
- 尝试通过和追踪小球同理的方法，尝试进行对绿色门的色块识别与追踪
- 调试后完成对门的追踪
- 将球的追踪代码和绿色门的代码初步合拢，尝试第一版代码：运球入门

### 2024/8/23 下午
- 不挺调整参数尝试运球入门
- 更改策略为对准与踢球入门，并继续调整参数，处理解决如UART传输卡顿，摄像头视野，轮子脱落，色块识别随光照变化大等问题
- 完成踢球入门的代码跑通，待更多精密调试

### 2024/8/26 上午
- 精进踢球代码，完成踢球验收
- 改进摄像头的物理控制手段，通过巧妙的绳索牵拉方式，对小车进行个性化设计，稳固摄像头

### 2024/8/26 下午
- 略改踢球代码，完成入门验收，至此基本验收完成
- 整理代码版本与视频材料
- 开始进行自主创新项目:摄像头循迹

### 2024/8/27 上午
- 完成摄像头循迹全流程:识路,流畅转弯,避障,停车
- 开始准备小车对战以及报告撰写

### 2024/8/27 下午
- 调试小车对战版本代码
- 撰写实验报告，整理相关材料

### 2024/8/28 上午
- 改装小车,给小车加装车甲
- 改进小车转向、射门等精度
- 继续撰写报告，完成除科目一二源代码整理的其他部分

### 2024/8/28 下午
- 解决小车无法看到远处红球的问题
- 进一步优化小车速度，使得其可以在场地更高速行驶
- 给摄像头加上加固装置，减小摄像头由于行驶过程中车身震动带来的晃动
- 与其他队伍进行模拟对战，知己知彼，百战百胜

### 2024/8/29 上午
- 进一步调整代码参数，参与比赛，在四轮激战后获得第八名的成绩，进入八强
- 制作汇报PPT第一部分（光电循迹部分）

### 2024/8/29 下午
- 更进一步调整代码参数，加装粉色盔甲，参与比赛，虽止步八强，但仍喜获第七名的好成绩！！！！！
- 继续制作PPT
- 补拍光电循迹、避障部分的视频，完善报告内容
